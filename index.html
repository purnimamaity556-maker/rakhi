<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mini E‑commerce</title>
  <style>
    :root{
      --bg:#f6f8fb; --card:#ffffff; --muted:#61708a; --accent:#0066ff; --danger:#e55353; --glass: rgba(255,255,255,0.6);
      --radius:12px; --maxw:1100px;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,#eef6ff 0%,var(--bg) 100%);color:#0b1a2b;display:flex;justify-content:center;padding:28px}
    .wrap{width:100%;max-width:var(--maxw);}

    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{height:46px;width:46px;background:var(--accent);border-radius:10px;display:grid;place-items:center;color:white;font-weight:700}
    h1{margin:0;font-size:18px}
    .controls{display:flex;gap:12px;align-items:center}
    .search{padding:10px 12px;border-radius:10px;border:1px solid #e0e6ef;background:var(--card);min-width:220px}
    select{padding:10px;border-radius:10px;border:1px solid #e0e6ef}
    .cart-btn{background:var(--accent);color:white;padding:10px 12px;border-radius:10px;border:none;cursor:pointer}

    main{display:grid;grid-template-columns: 1fr 340px;gap:20px}

    /* products */
    .products{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px}
    .card{background:var(--card);border-radius:14px;padding:12px;border:1px solid rgba(10,20,40,0.04);box-shadow:0 6px 18px rgba(12,24,48,0.04);display:flex;flex-direction:column;gap:10px}
    .thumb{height:160px;border-radius:10px;background-size:cover;background-position:center}
    .title{font-weight:600;font-size:14px}
    .price{font-weight:700}
    .meta{display:flex;justify-content:space-between;align-items:center}
    .add{background:linear-gradient(90deg,var(--accent),#4c8bff);border:none;color:white;padding:8px 10px;border-radius:10px;cursor:pointer}

    /* cart */
    .cart{background:linear-gradient(180deg,rgba(255,255,255,0.85),var(--card));border-radius:14px;padding:12px;border:1px solid rgba(10,20,40,0.04);position:relative}
    .cart h3{margin:0 0 8px 0}
    .cart-list{display:flex;flex-direction:column;gap:8px;max-height:420px;overflow:auto;padding-right:6px}
    .cart-item{display:flex;gap:10px;align-items:center}
    .cart-item img{width:56px;height:56px;border-radius:8px;object-fit:cover}
    .qty{display:flex;gap:6px;align-items:center}
    .qty button{padding:6px 8px;border-radius:8px;border:1px solid #e6eef7;background:transparent;cursor:pointer}
    .total{display:flex;justify-content:space-between;font-weight:700;padding-top:8px;border-top:1px dashed rgba(10,20,40,0.06);margin-top:10px}
    .checkout{width:100%;margin-top:10px;padding:10px;border-radius:10px;border:none;cursor:pointer;background:var(--accent);color:white}

    /* product modal */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(3,6,18,0.45);padding:20px}
    .modal.active{display:flex}
    .modal-card{width:100%;max-width:900px;background:var(--card);border-radius:14px;padding:16px;display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .modal .thumb{height:320px}

    footer{margin-top:18px;text-align:center;color:var(--muted);font-size:13px}

    /* responsive */
    @media(max-width:980px){main{grid-template-columns:1fr} .cart{order:2}}
    @media(max-width:420px){.thumb{height:140px} .modal .thumb{height:220px}}

  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo">E</div>
        <div>
          <h1>Mini Shop</h1>
          <div style="font-size:12px;color:var(--muted)"></div>
        </div>
      </div>

      <div class="controls">
        <input id="search" class="search" placeholder="Search products..." />
        <select id="category">
          <option value="all">All categories</option>
        </select>
        <select id="sort">
          <option value="default">Sort: Featured</option>
          <option value="price-asc">Price: Low → High</option>
          <option value="price-desc">Price: High → Low</option>
        </select>
        <button id="open-cart" class="cart-btn">Cart (<span id="cart-count">0</span>)</button>
      </div>
    </header>

    <main>
      <section>
        <div id="products" class="products"></div>
      </section>

      <aside class="cart" id="cart-panel">
        <h3>Your Cart</h3>
        <div class="cart-list" id="cart-list">
          <!-- items -->
        </div>
        <div class="total"><span>Subtotal</span><span id="subtotal">₹0.00</span></div>
        <button id="checkout" class="checkout">Checkout</button>
      </aside>
    </main>
  </div>

  <!-- Modal -->
  <div class="modal" id="modal">
    <div class="modal-card">
      <div>
        <div id="modal-image" class="thumb" style="background:#ddd"></div>
      </div>
      <div>
        <h2 id="modal-title"></h2>
        <p id="modal-desc" style="color:var(--muted)"></p>
        <div style="margin-top:8px;font-weight:800;font-size:20px" id="modal-price"></div>
        <div style="margin-top:12px;display:flex;gap:8px">
          <button id="modal-add" class="add">Add to cart</button>
          <button id="modal-close" class="add" style="background:#e6eef7;color:var(--accent);font-weight:700">Close</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // SAMPLE PRODUCT DATA - edit this array to add your own products
    const PRODUCTS = [
      {id:1,title:'Classic White T-Shirt',price:399,category:'Clothing',img:'https://images.unsplash.com/photo-1581655353564-df123a1eb820?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8N3x8Q2xhc3NpYyUyMFdoaXRlJTIwVCUyMFNoaXJ0fGVufDB8fDB8fHww?q=80&w=800&auto=format&fit=crop&ixlib=rb-4.0.3&s=8b7b5a1e9cc2c5d1f3c1c6a2f7a8b2e6',desc:'Soft cotton tee, regular fit.'},
      {id:2,title:'Blue Denim Jeans',price:1299,category:'Clothing',img:'https://plus.unsplash.com/premium_photo-1674828600712-7d0caab39109?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NXx8Qmx1ZSUyMERlbmltJTIwSmVhbnN8ZW58MHx8MHx8fDA%3D?q=80&w=800&auto=format&fit=crop&ixlib=rb-4.0.3&s=4a0c4f8b5d3f6a1e3b2c4a5c6d7e8f9a',desc:'Slim-fit denim with stretch.'},
      {id:3,title:'Running Sneakers',price:2599,category:'Shoes',img:'https://images.unsplash.com/photo-1542291026-7eec264c27ff?q=80&w=800&auto=format&fit=crop&ixlib=rb-4.0.3&s=07b7d4c9e3a2b1d8f5a6e7c3b9a2f0e1',desc:'Lightweight and breathable sneakers.'},
      {id:4,title:'Smart Watch',price:4999,category:'Electronics',img:'https://images.unsplash.com/photo-1579586337278-3befd40fd17a?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8U21hcnQlMjBXYXRjaHxlbnwwfHwwfHx8MA%3D%3D?q=80&w=800&auto=format&fit=crop&ixlib=rb-4.0.3&s=9c4f7a7b5c1d2e3f4a5b6c7d8e9f0a1b',desc:'Track your fitness and notifications.'},
      {id:5,title:'Leather Wallet',price:799,category:'Accessories',img:'https://images.unsplash.com/photo-1636023189308-06668418548d?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTl8fExlYXRoZXIlMjBXYWxsZXR8ZW58MHx8MHx8fDA%3D?q=80&w=800&auto=format&fit=crop&ixlib=rb-4.0.3&s=3f2e1d0a9b8c7d6e5f4a3b2c1d0e9f8a',desc:'Elegant bi-fold leather wallet.'},
      {id:6,title:'Sunglasses',price:1199,category:'Accessories',img:'https://images.unsplash.com/photo-1511499767150-a48a237f0083?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8U3VuZ2xhc3Nlc3xlbnwwfHwwfHx8MA%3D%3D?q=80&w=800&auto=format&fit=crop&ixlib=rb-4.0.3&s=6a7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d',desc:'UV protection with polarised lenses.'}
    ];

    // --- State ---
    let state = {
      products: [...PRODUCTS],
      cart: JSON.parse(localStorage.getItem('mini_cart')||'{}')
    };

    // --- Helpers ---
    const q = s => document.querySelector(s);
    const money = v => '₹' + Number(v).toLocaleString('en-IN', {maximumFractionDigits:2});

    // --- Render categories
    function populateCategories(){
      const set = new Set(state.products.map(p=>p.category));
      const sel = q('#category');
      for(const c of set){
        const opt = document.createElement('option'); opt.value=c; opt.textContent=c; sel.appendChild(opt);
      }
    }

    // --- Render products ---
    function renderProducts(list){
      const container = q('#products'); container.innerHTML='';
      list.forEach(p=>{
        const el = document.createElement('div'); el.className='card';
        el.innerHTML = `
          <div class="thumb" style="background-image:url('${p.img}')"></div>
          <div class="title">${p.title}</div>
          <div style="color:var(--muted);font-size:13px">${p.category}</div>
          <div class="meta">
            <div>
              <div class="price">${money(p.price)}</div>
            </div>
            <div>
              <button class="add" data-id="${p.id}">Add</button>
            </div>
          </div>
        `;
        // click to open modal
        el.querySelector('.thumb').addEventListener('click',()=>openModal(p.id));
        el.querySelector('.add').addEventListener('click',()=>addToCart(p.id));
        container.appendChild(el);
      })
    }

    // --- Cart operations ---
    function saveCart(){ localStorage.setItem('mini_cart', JSON.stringify(state.cart)); updateCartUI(); }

    function addToCart(id,qty=1){
      const key = String(id);
      if(state.cart[key]) state.cart[key].qty += qty;
      else {
        const p = state.products.find(x=>x.id===id);
        state.cart[key] = {id:p.id,title:p.title,price:p.price,img:p.img,qty:qty};
      }
      saveCart();
      showToast('Added to cart');
    }

    function removeFromCart(id){ delete state.cart[String(id)]; saveCart(); }
    function changeQty(id,delta){ const k=String(id); if(!state.cart[k]) return; state.cart[k].qty += delta; if(state.cart[k].qty<1) delete state.cart[k]; saveCart(); }

    function clearCart(){ state.cart = {}; saveCart(); }

    // --- UI update ---
    function updateCartUI(){
      const list = q('#cart-list'); list.innerHTML='';
      const items = Object.values(state.cart);
      let subtotal = 0, count = 0;
      if(items.length===0) list.innerHTML='<div style="color:var(--muted)">Your cart is empty.</div>';
      items.forEach(it=>{
        subtotal += it.price*it.qty; count += it.qty;
        const row = document.createElement('div'); row.className='cart-item';
        row.innerHTML = `
          <img src="${it.img}" alt="">
          <div style="flex:1">
            <div style="font-weight:700">${it.title}</div>
            <div style="color:var(--muted);font-size:13px">${money(it.price)}</div>
          </div>
          <div class="qty">
            <button data-action="dec" data-id="${it.id}">-</button>
            <div>${it.qty}</div>
            <button data-action="inc" data-id="${it.id}">+</button>
            <button data-action="del" data-id="${it.id}" style="margin-left:8px;background:transparent;border:none;color:var(--danger);cursor:pointer">✕</button>
          </div>
        `;
        list.appendChild(row);
      });
      q('#subtotal').textContent = money(subtotal);
      q('#cart-count').textContent = count;

      // attach qty buttons
      list.querySelectorAll('button[data-action]').forEach(btn=>{
        const act = btn.getAttribute('data-action'); const id = Number(btn.getAttribute('data-id'));
        btn.addEventListener('click',()=>{
          if(act==='inc') changeQty(id,1);
          if(act==='dec') changeQty(id,-1);
          if(act==='del') removeFromCart(id);
        });
      });
    }

    // --- Modal ---
    function openModal(id){
      const p = state.products.find(x=>x.id===id);
      q('#modal').classList.add('active');
      q('#modal-image').style.backgroundImage = `url('${p.img}')`;
      q('#modal-title').textContent = p.title;
      q('#modal-desc').textContent = p.desc;
      q('#modal-price').textContent = money(p.price);
      q('#modal-add').onclick = ()=>{ addToCart(p.id); q('#modal').classList.remove('active'); };
    }
    q('#modal-close').addEventListener('click',()=>q('#modal').classList.remove('active'));
    q('#modal').addEventListener('click',(e)=>{ if(e.target===q('#modal')) q('#modal').classList.remove('active'); });

    // --- Search / Filter / Sort ---
    function applyFilters(){
      const qstr = q('#search').value.trim().toLowerCase();
      const cat = q('#category').value;
      const sort = q('#sort').value;
      let out = state.products.filter(p=> (p.title.toLowerCase().includes(qstr) || p.desc.toLowerCase().includes(qstr)) && (cat==='all' ? true : p.category===cat) );
      if(sort==='price-asc') out.sort((a,b)=>a.price-b.price);
      if(sort==='price-desc') out.sort((a,b)=>b.price-a.price);
      renderProducts(out);
    }

    // --- small toast for feedback ---
    function showToast(msg){
      const t = document.createElement('div'); t.textContent=msg; t.style.cssText='position:fixed;right:18px;bottom:18px;padding:10px 12px;background:#122b4a;color:white;border-radius:10px;box-shadow:0 8px 20px rgba(8,18,40,0.2)';
      document.body.appendChild(t); setTimeout(()=>{ t.style.opacity='0'; t.style.transform='translateY(8px)'; setTimeout(()=>t.remove(),400) },1200);
    }

    // --- Checkout simulation ---
    q('#checkout').addEventListener('click',()=>{
      const items = Object.values(state.cart);
      if(items.length===0){ showToast('Cart is empty'); return; }
      // Simulate checkout success
      alert('Checkout simulated — thank you for your purchase!');
      clearCart();
    });

    // open/close cart panel on small screens
    q('#open-cart').addEventListener('click',()=>{
      const panel = q('#cart-panel'); if(window.innerWidth<=980){ panel.scrollIntoView({behavior:'smooth'});} else panel.style.boxShadow = '0 12px 40px rgba(9,20,40,0.06)';
    });

    // wire up search/filter events
    q('#search').addEventListener('input',applyFilters);
    q('#category').addEventListener('change',applyFilters);
    q('#sort').addEventListener('change',applyFilters);

    // init
    populateCategories(); renderProducts(state.products); updateCartUI();

  </script>
</body>
</html>